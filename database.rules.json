{
  "rules": {
    "orders": {
      // Allow anyone to create a new order record.
      // The '.write' rule here allows a user to write to a location if there's no data there already.
      // We validate that the incoming data must have a `buyerName` and `totalAmount` to be valid.
      ".write": "!data.exists() && newData.exists() && newData.hasChildren(['buyerName', 'totalAmount', 'orderDate', 'status', 'deliveryMethod', 'items'])",
      // No one can read the entire list of orders unless they are an admin (covered by root rule).
      ".read": false
    },
    // Authenticated admins have full read/write access to the entire database.
    // This rule is placed at the root but checked after the more specific 'orders' rule.
    ".read": "auth != null",
    ".write": "auth != null"
  }
}
